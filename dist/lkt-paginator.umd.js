(function(t,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue"),require("lkt-http-client")):typeof define=="function"&&define.amd?define(["vue","lkt-http-client"],r):(t=typeof globalThis<"u"?globalThis:t||self,t.LktButton=r(t.Vue,t.LktHttpClient))})(this,function(t,r){"use strict";var u=Object.defineProperty;var m=(t,r,l)=>r in t?u(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l;var d=(t,r,l)=>(m(t,typeof r!="symbol"?r+"":r,l),l);class l{}d(l,"FIRST_BUTTON_NAME","First"),d(l,"PREV_BUTTON_NAME","Prev"),d(l,"NEXT_BUTTON_NAME","Next"),d(l,"LATEST_BUTTON_NAME","Latest");const g=t.defineComponent({emits:["update:modelValue","loading","results","error"],name:"LktPaginator",props:{modelValue:{type:Number,default:1},maxPage:{type:Number,default:1},resource:{type:String,default:""},palette:{type:String,default:""},slaveMode:{type:Boolean,default:!1},filters:{type:Object,default(){return{}}}},data(){return{Page:1}},computed:{firstButtonName(){return l.FIRST_BUTTON_NAME},prevButtonName(){return l.PREV_BUTTON_NAME},nextButtonName(){return l.NEXT_BUTTON_NAME},latestButtonName(){return l.LATEST_BUTTON_NAME},previousPages(){let e=[],a=this.Page-1,o=a-5;o<0&&(o=0);for(let s=a;s>o;--s)e.push(s);return e=e.reverse(),e},nextPages(){let e=[],a=this.Page+5;a>this.maxPage&&(a=this.maxPage);for(let o=this.Page+1;o<=a;++o)e.push(o);return e},options(){let e=[];for(let a=1;a<=this.maxPage;++a)e.push({id:a,text:a});return e},disabledNext(){return this.Page>=this.maxPage},disabledPrev(){return this.Page<=1}},watch:{modelValue(e){this.Page=parseInt(e)},Page(){this.loadPage()},filters:{handler(e){parseInt(this.Page)!==1?this.Page=1:(this.Page=1,this.loadPage())},deep:!0}},methods:{loadPage(){console.log("loadPage",this.Page);let e={};typeof this.filters=="object"&&Object.keys(this.filters).length>0&&(e=JSON.parse(JSON.stringify(this.filters)));for(let a in e)(Array.isArray(e[a])||typeof e[a]=="object")&&(e[a]=JSON.stringify(e[a]));e.page=this.Page,this.$emit("update:modelValue",this.Page),this.$emit("loading"),console.log("loadPage 1",e),!this.slaveMode&&(console.log("before call",this.resource,r.httpCall,r.getRouter()),r.httpCall(this.resource,e).then(a=>{console.log("hey!",a),this.$emit("results",a.data)}).catch(a=>{console.log("douch!",a),this.$emit("error",a)}))},next(){++this.Page},latest(){this.Page=this.maxPage},prev(){--this.Page},first(){this.Page=1},goTo(e){this.Page=e}},created(){console.log("paginator created!!"),!this.slaveMode&&this.loadPage()}}),P="",c=(e,a)=>{const o=e.__vccOpts||e;for(const[s,p]of a)o[s]=p;return o},N=["data-palette"];function f(e,a,o,s,p,B){const n=t.resolveComponent("lkt-button");return t.openBlock(),t.createElementBlock("div",{"data-lkt":"paginator","data-palette":e.palette},[t.createVNode(n,{onClick:e.first,disabled:e.disabledPrev,"data-role":"first",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(e.firstButtonName),1)]),_:1},8,["onClick","disabled","palette"]),t.createVNode(n,{onClick:e.prev,disabled:e.disabledPrev,"data-role":"prev",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(e.prevButtonName),1)]),_:1},8,["onClick","disabled","palette"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.previousPages,i=>(t.openBlock(),t.createBlock(n,{key:i,onClick:()=>{e.goTo(i)},"data-role":"page",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(i),1)]),_:2},1032,["onClick","palette"]))),128)),t.createVNode(n,{disabled:"","data-role":"page",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(e.Page),1)]),_:1},8,["palette"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.nextPages,i=>(t.openBlock(),t.createBlock(n,{key:i,onClick:()=>{e.goTo(i)},"data-role":"page",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(i),1)]),_:2},1032,["onClick","palette"]))),128)),t.createVNode(n,{onClick:e.next,disabled:e.disabledNext,"data-role":"next",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(e.nextButtonName),1)]),_:1},8,["onClick","disabled","palette"]),t.createVNode(n,{onClick:e.latest,disabled:e.disabledNext,"data-role":"latest",palette:e.palette},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(e.latestButtonName),1)]),_:1},8,["onClick","disabled","palette"])],8,N)}const h=c(g,[["render",f],["__scopeId","data-v-253ab614"]]);return{install:(e,a)=>{e.component("lkt-paginator",h),a&&a.firstButtonName&&(l.FIRST_BUTTON_NAME=a.firstButtonName),a&&a.prevButtonName&&(l.PREV_BUTTON_NAME=a.prevButtonName),a&&a.nextButtonName&&(l.NEXT_BUTTON_NAME=a.nextButtonName),a&&a.latestButtonName&&(l.LATEST_BUTTON_NAME=a.latestButtonName)}}});
